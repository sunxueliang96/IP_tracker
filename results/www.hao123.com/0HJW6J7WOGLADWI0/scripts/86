define("indexnew:component/skin/service.js",["global","module","exports","require","indexnew:static/js/log.js","indexnew:static/js/profile.js","indexnew:static/js/events.js","indexnew:static/js/cookie.js","indexnew:static/js/jquery.js","indexnew:static/js/config.js","indexnew:component/skin/hooks.js"],function(e,n,i,s,t,c,o,r,a,p,d){function k(e){try{e=e||N.curSkin,H||N.userSkin!==y||e===y||w({type:"newskin"}),H=!0,e&&N.userSkin!==e&&(_.set(S,e),N.lastSkin=N.userSkin,N.userSkin=N.curSkin=e,L.emit("skin.save",e))}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/skin/service.js",ln:57})}}function l(e,n){try{var i,s=N.curSkin;if(e&&N.curSkin!==e){i=HAO.httpsTrans(j+"?c="+b.getC()+"&type=kp&skin="+e);var t=q("#userSkin");t[0]||(t=q('<link rel="stylesheet" type="text/css" id="userSkin"></link>').appendTo("head")),t.attr("href",i),N.curSkin=e}q("body").prop("className","sk_"+e),n&&n.src&&(N.src=n.src),L.emit(s+"unload"),g(s,N.curSkin)}catch(c){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:c.message||c.description,path:"indexnew:component/skin/service.js",ln:102})}}function g(e,n){try{var i=A[e];i&&i(!1),i=A[n],i&&i(!0)}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/skin/service.js",ln:120})}}function u(){try{l(N.userSkin,{src:"cansel"})}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/skin/service.js",ln:129})}}function f(){try{l(y,{src:"reset"}),k(y)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/skin/service.js",ln:139})}}function h(e){try{e=e||"resetLast",l(N.lastSkin,{src:e}),k(N.lastSkin)}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/skin/service.js",ln:151})}}function m(){try{if(!C){var e=T.get("userSkin"),n=e&&e[0]&&e[0].name;n&&(N.curSkin=N.userSkin=N.lastSkin=n);var i=T.get("skinresource");q.each(i,function(e,n){try{A._add(n.tip,function(e){try{e?A._Loadskinresource(n):A._Unloadskinresource()}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/skin/service.js",ln:173})}})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/skin/service.js",ln:174})}}),C=!0}try{g(null,N.curSkin)}catch(s){}}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/skin/service.js",ln:184})}}function x(e){try{return e?N[e]:N}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/skin/service.js",ln:188})}}var S="skin",y="skin-color-green",j="/api/getskins/",v="init",w=t,_=c,L=o,b=r,q=a,T=p,A=d,C=!1,H=!1,N={userSkin:y,curSkin:y,lastSkin:y,src:v};n.exports={init:m,get:x,resetLastSkin:h,config:N,setSkin:k,viewSkin:l,canselSkin:u,resetSkin:f}});